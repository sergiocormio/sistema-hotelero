<?xml version="1.0" encoding="utf-8"?>
<s:VGroup xmlns:fx="http://ns.adobe.com/mxml/2009" 
		  xmlns:s="library://ns.adobe.com/flex/spark" 
		  xmlns:mx="library://ns.adobe.com/flex/mx" width="100%" height="100%" xmlns:individual="view.forms.crud.individual.*" xmlns:components="view.components.*"
		  creationComplete="init()">
	<fx:Script>
		<![CDATA[
			import flash.sampler.getInvocationCount;
			
			import flashx.textLayout.operations.PasteOperation;
			
			import mx.collections.ArrayCollection;
			import mx.controls.Alert;
			import mx.events.FlexEvent;
			import mx.rpc.events.FaultEvent;
			import mx.rpc.events.ResultEvent;
			
			import resources.Colors;
			import resources.icons.Icons;
			import resources.images.Images;
			
			import services.MigrationService;
			import services.crud.ReservationFormExpirationDaysService;
			
			import utils.config.UserSettings;
			
			import view.components.Mask;
			
			[Bindable]
			public var loc:Object;
			
			
			protected function init():void
			{
				var expDays:String = UserSettings.getInstance().getReservationFormExpDays();
				daysToExpire.value = Number(expDays);
				
				emailSenderText.text = UserSettings.getInstance().getEmailSender();
				
				pswSenderText.text = UserSettings.getInstance().getPassword();
				
				testEmailText.text = UserSettings.getInstance().getEmailTest();
				
			}
			
			
			
			
			
			private function save():void{
				
				UserSettings.getInstance().setReservationFormExpDays(daysToExpire.value.toString());
				UserSettings.getInstance().setEmailSender(emailSenderText.text);
				UserSettings.getInstance().setpassword(pswSenderText.text);
				UserSettings.getInstance().setEmailTest(testEmailText.text);
				
				UserSettings.getInstance().update();
				
			}
			
			
			
			private function update_resultHandler(event:ResultEvent,token:Object=null):void {
			
			}
			
		]]>
	</fx:Script>
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	
	<s:Group width="100%" height="100%" horizontalCenter="0" verticalCenter="0">
		
		<s:Rect width="100%" height="100%" horizontalCenter="0" verticalCenter="0">
			<s:stroke>
				<s:SolidColorStroke color="{Colors.YELLOW_COLOR}" weight="1"/>
			</s:stroke>
			<s:fill><s:SolidColor color="{Colors.GRAY_COLOR}"/></s:fill>
		</s:Rect>
	
		<s:VGroup width="100%" height="100%" verticalAlign="top" paddingTop="10" paddingLeft="40">
			<s:VGroup width="100%">
				
				<s:Form width="100%">
					<s:layout>
						<s:FormLayout gap="0"/>
					</s:layout> 
									
					<s:FormHeading label="- {loc.userSetting.reservationFormExpirationDate.plural}:"
								   fontWeight="bold" fontStyle="italic" fontSize="12" />
					
					<s:FormItem label="{loc.userSetting.reservationFormExpirationDate.descriptionLabel} ({loc.userSetting.reservationFormExpirationDate.days}):" >
						<s:NumericStepper id="daysToExpire" minimum="1" maximum="{Number.MAX_VALUE}" width="50"/>
					</s:FormItem>
				</s:Form>
				
				<s:Line width="90%">
					<s:stroke>
						<s:SolidColorStroke color="{Colors.RED_COLOR}" weight="2"/>
					</s:stroke>
				</s:Line>
			</s:VGroup>
			
			<s:VGroup width="100%">
				<s:Form width="100%">
					<s:layout>
						<s:FormLayout gap="0"/>
					</s:layout> 
						
					<s:FormHeading label="- {loc.userSetting.mail.config}:"
								   fontWeight="bold" fontStyle="italic" fontSize="12" />
					
					<s:FormItem label="{loc.userSetting.mail.emailSender}:">
						<s:TextInput id="emailSenderText" widthInChars="25"/>
					</s:FormItem>
					
					<s:FormItem label="{loc.userSetting.mail.pswSender}:">
						<s:TextInput id="pswSenderText" widthInChars="15"/>
					</s:FormItem>
					
					<!--<s:FormItem label="{loc.userSetting.mail.confirmPswSender}:">
						<s:TextInput id="confirmPswText" widthInChars="15"/>
					</s:FormItem>-->
					
					<s:FormItem label="{loc.userSetting.mail.testEmail}:">
						<s:TextInput id="testEmailText" widthInChars="25"/>
					</s:FormItem>
				
				</s:Form>
				
				<s:Line width="90%">
					<s:stroke>
						<s:SolidColorStroke color="{Colors.RED_COLOR}" weight="2"/>
					</s:stroke>
				</s:Line>
				
			</s:VGroup>
				
			<s:Spacer height="5"/>
			
			<s:HGroup verticalAlign="bottom" paddingBottom="30">
				<!-- BUTTONS -->
				<s:Button id="saveButton" label="{loc.button.save}" click="save()" icon="{Icons.save}" />
			</s:HGroup>
			
		</s:VGroup>
	</s:Group>
</s:VGroup>



